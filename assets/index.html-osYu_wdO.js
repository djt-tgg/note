import{_ as l,c as h,a as s,b as k,o as e,r as i}from"./app-CebKgOdK.js";const t={},p=k(`<h1 id="常用工具指令" tabindex="-1"><a class="header-anchor" href="#常用工具指令"><span>常用工具指令</span></a></h1><h2 id="自定义指令" tabindex="-1"><a class="header-anchor" href="#自定义指令"><span>自定义指令</span></a></h2><h3 id="一次性导入所有指令" tabindex="-1"><a class="header-anchor" href="#一次性导入所有指令"><span>一次性导入所有指令</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//新建directives文件夹  文件夹下index.js 和 dirs.js</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#ED8796;--shiki-dark:#D19A66;"> *</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> directives</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;@/directives/dirs.js&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> Vue</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;vue&#39;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//dirs.js文件中</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> 指令名</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  inserted</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">el</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> binding</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 指令逻辑</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">};</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 注册自定义指令</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 遍历所有的导出的指令对象 完成自定义全局注册</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//指令都在directives里面  main.js引入当前文件,调用dirAll方法</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> dirAll</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">k</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> v</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> of</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">entries</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">directives</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        Vue</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">directive</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">k</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> </span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//main.js</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> dirAll</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;@/directives&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">dirAll</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节流指令" tabindex="-1"><a class="header-anchor" href="#节流指令"><span>节流指令</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 创建全局自定义指令 v-throttle</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">Vue</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">directive</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;throttle&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  inserted</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">el</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> binding</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> timeout</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> wait</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> parseInt</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">arg</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 300</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 设置默认的节流等待时间</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 监听元素的事件，并在事件触发时执行回调函数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">    el</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">addEventListener</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">modifiers</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">event</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;click&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> ()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">timeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">        clearTimeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">timeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      timeout</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> setTimeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> ()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">value</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 执行传递给指令的回调函数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      },</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> wait</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//使用</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#FFFFFF;"> v-throttle:500.click=&quot;handleClick&quot;&gt;节流按钮&lt;/button&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#FFFFFF;">  &lt;/div&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#FFFFFF;">&lt;/template&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="防抖指令" tabindex="-1"><a class="header-anchor" href="#防抖指令"><span>防抖指令</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 创建全局防抖指令 v-debounce</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">Vue</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">directive</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;debounce&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  inserted</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">el</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> binding</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> timeout</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> delay</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> parseInt</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 300</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 设置默认的防抖延迟时间</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 监听输入事件，并在输入结束后延迟触发回调函数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">    el</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">addEventListener</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> ()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">      clearTimeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">timeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      timeout</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> setTimeout</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> ()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">value</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 执行传递给指令的回调函数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      },</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> delay</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//使用 </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> v-debounce</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;handleInput&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> placeholder</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;防抖输入框&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图片懒加载指令" tabindex="-1"><a class="header-anchor" href="#图片懒加载指令"><span>图片懒加载指令</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">Vue</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">directive</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;lazyload&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  inserted</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">el</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> binding</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> imageSrc</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> binding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      threshold</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0.5</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 触发加载的阈值</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    };</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> observer</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> IntersectionObserver</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">entries</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      entries</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">forEach</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">entry</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">entry</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">isIntersecting</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">          el</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> imageSrc</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">          observer</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">unobserve</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">el</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> options</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">    observer</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">observe</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">el</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//使用</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">img</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> v-lazyload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;imgUrl&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> alt</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;Lazy Loaded Image&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="上传图片到七牛" tabindex="-1"><a class="header-anchor" href="#上传图片到七牛"><span>上传图片到七牛</span></a></h2><div class="language-vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-vue;"><code><span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">// 首先后台会有一个接口,上传前需要先获取七牛云的配置信息</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">// 获取到配置信息后,方可上传到七牛云,将图片信息和配置信息一块上传</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">//图片上传组件封装</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;image-upload&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;size&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-upload</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">        action</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;#&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> hide</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> hideUploadBtn</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">        list-type</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;picture-card&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">file-list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">fileList</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">limit</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">limit</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-preview</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">preview</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-remove</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onRemove</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">        accept</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;image/*&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">before-upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onBeforeUpload</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">http-request</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onHTTPRequest</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-success</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onSuccess</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-error</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onError</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;el-icon-plus&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> slot</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;tip&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;el-upload__tip&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">          只能上传 jpg / png / jpeg 文件,且不超过</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">          &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">span</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">color</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> red</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">5</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">span</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> M</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-dialog</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">modal</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">visible</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">sync</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">showDialog</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">show-close</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">img</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">imgUrl</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> alt</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#F5A97F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-dialog</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> getToken</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;@/utils/auth&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> getPage</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;@/api/upload/upload.js&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> axios</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;axios&#39;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;ImageUpload&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  model</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    prop</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;value&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    event</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  props</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      type</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> String</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> |</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> Array</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    limit</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      type</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> Number</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      default</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // props 在 data 之前解析</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">!!</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">limit</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">        fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">push</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> else</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">        fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">        fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">map</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">v</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      showDialog</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">      fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      imgUrl</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    };</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  computed</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    hideUploadBtn</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 已上传的文件列表的长度 等于 最大限制数量 就隐藏上传按钮</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">limit</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // watch: {</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  methods</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 上传前的图片检查</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    onBeforeUpload</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#F5BDE6;--shiki-dark:#E06C75;">/</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">^</span><span style="--shiki-light:#A6DA95;--shiki-dark:#E06C75;">image</span><span style="--shiki-light:#F5BDE6;--shiki-dark:#56B6C2;">\\/</span><span style="--shiki-light:#F5BDE6;--shiki-dark:#E06C75;">.</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#D19A66;">+</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#F5BDE6;--shiki-dark:#E06C75;">/</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">test</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">$message</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">warning</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;只能选择图片类型的文件&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 单位：Byte</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">size</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1024</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1024</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">$message</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">warning</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;图片大小不能超过 5 M&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">      </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //自定义上传</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> onHTTPRequest</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 获取七牛token</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> getPage</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> formData</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> FormData</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> res</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;"> ...</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">page</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 将七牛token和图片信息存到formData对象里上传</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      for</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> key</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">hasOwnProperty</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">call</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> key</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">          const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">          formData</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">append</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 上传到七牛云</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> axios</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;https://upload-z2.qiniup.com&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        method</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;post&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> formData</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        headers</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          Authorization</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;Bearer &#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> getToken</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;//images.xxx.com/&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;//images.xxx.com/&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">    </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 如果是用 :http-request 自定义的上传动作 其处理函数的返回值 会作为 :on-success 的 response</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    onSuccess</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">response</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">response</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;response&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;string&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">$emit</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">response</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> else</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;list&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">$emit</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">          &#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">          fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">map</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">v</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // console.log(v, &#39;vvvvvvvvvvvvv&#39;)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> v</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">response</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> v</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">        )</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">$emit</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;success&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> response</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    onError</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">$message</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">error</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;图片上传失败，请稍后重试~&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 删除</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    onRemove</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> fileList</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;string&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">$emit</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> else</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">$emit</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">          &#39;input&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">          fileList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">map</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">v</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> v</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">response</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> v</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">        )</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 预览</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    preview</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">imgUrl</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">showDialog</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">};</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> lang</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;scss&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> scoped</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> //隐藏上传按钮</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;">.</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">hide</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  :</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">:v-deep .el-upload</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">--picture-card</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">    display</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;">none</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改el-upload组件框大小" tabindex="-1"><a class="header-anchor" href="#修改el-upload组件框大小"><span>修改el-upload组件框大小</span></a></h2><div class="language-vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-vue;"><code><span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-upload</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">      </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">      action</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;https://&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">      list-type</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;picture-card&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-preview</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">handlePictureCardPreview</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">on-remove</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">handleRemove</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> slot</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;trigger&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;title&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">点击上传</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">el-upload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> lang</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;scss&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> scoped</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">v-deep</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">el-upload</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  line-height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">v-deep</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">el-upload-list--picture-card</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">el-upload-list__item</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  line-height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">v-deep</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">el-upload-list--picture-card</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">el-upload-list__item-thumbnail</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  line-height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">v-deep</span><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;"> .</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">avatar</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E06C75;">px</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="过滤时间" tabindex="-1"><a class="header-anchor" href="#过滤时间"><span>过滤时间</span></a></h2><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * 格式化日期，并可选择是否包含时分秒部分</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">param</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> {</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">string</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> cellValue</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> - 要格式化的日期字符串或日期对象</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">param</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> {</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">boolean</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#939AB7;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> [</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">includeTime</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">=</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">false</span><span style="--shiki-light:#939AB7;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">]</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> - 是否包含时分秒部分，默认为 false</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">returns</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> {</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">string</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> 格式化后的日期字符串，格式为 &quot;YYYY-MM-DD&quot; 或 &quot;YYYY-MM-DD HH:mm:ss&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> formatDate</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">cellValue</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> includeTime</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">cellValue</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> Date</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">cellValue</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> year</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getFullYear</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> month</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getMonth</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">padStart</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;0&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> day</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getDate</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">padStart</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;0&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> formattedDate</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> \`</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">year</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">month</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">day</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">includeTime</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> hours</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getHours</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">padStart</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;0&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> minutes</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getMinutes</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">padStart</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;0&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> seconds</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> date</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getSeconds</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">toString</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">padStart</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;0&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    formattedDate</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> \` </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">hours</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">minutes</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">seconds</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> formattedDate</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="前端长列表优化" tabindex="-1"><a class="header-anchor" href="#前端长列表优化"><span>前端长列表优化</span></a></h2><h3 id="前端分页" tabindex="-1"><a class="header-anchor" href="#前端分页"><span>前端分页</span></a></h3><div class="language-vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-vue;"><code><span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- 当前页的数据 --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> v-for</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> currentPageData</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">key</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">{{ item }}</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    &lt;!-- 分页导航 --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">click</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">prevPage</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">disabled</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">上一页</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">span</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">{{ currentPage }} / {{ totalPages }}</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">span</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">click</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">nextPage</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">disabled</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> totalPages</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">        下一页</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      arr</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 请求回来的数据数组</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      currentPageData</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 当前页的数据  分页真正要显示的数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      pageSize</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 每页显示的数据数量</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 当前页码</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      totalPages</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 总页数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    };</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  created</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 模拟从后端请求回来1000条数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &lt;=</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">arr</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">push</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 计算总页数  总数据长度 / 每页显示的数量 = 总页</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">totalPages</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> Math</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ceil</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">arr</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> /</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">pageSize</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 初始化第一页数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">updateCurrentPageData</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  methods</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 上一页</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    prevPage</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">--</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">updateCurrentPageData</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 下一页 </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    nextPage</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">totalPages</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">updateCurrentPageData</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 初始化分页数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    updateCurrentPageData</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 初始化截取索引  第一页从0到10截取</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> startIndex</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPage</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">pageSize</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 0</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> endIndex</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> startIndex</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">pageSize</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 10</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">currentPageData</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">arr</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">slice</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">startIndex</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> endIndex</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">};</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="虚拟列表" tabindex="-1"><a class="header-anchor" href="#虚拟列表"><span>虚拟列表</span></a></h3><div class="language-vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-vue;"><code><span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">      class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;list-container&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> viewport</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;px&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">      ref</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;list&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      @</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">scroll</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">onScroll</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      &lt;!-- 列表总高度 用于撑开盒子 数据总长度 * 每条数据高度 --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">        class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;list-phantom&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> listHeight</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;px&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> background</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;skyblue&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &gt;&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      &lt;!-- 数据列表 --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> class</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;list&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> transform</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> \`translateY(</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">offset</span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">px)\`</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> itemHeight</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;px&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">          ref</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;items&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">          v-for</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> visibleData</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">key</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">          {{ item }}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 总数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 每条数据的高度</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      itemHeight</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 60</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 当前视口要显示多少条数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      visibleItem</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 开始截取索引</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      sta</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 结束截取索引</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      end</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 偏移量</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      offset</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  created</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 模拟长列表数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">push</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 初始化要截取的开始值和结束值</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">sta</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">sta</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">visibleItem</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  computed</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 列表总高度 每一项高度 * 总数据的长度</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    listHeight</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">itemHeight</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">length</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 视口高度  每一项数据的高度 * 当前视口要显示的数据条数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    viewport</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">itemHeight</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">visibleItem</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 最终要展示的数据</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    visibleData</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      return</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">slice</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">sta</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> Math</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">min</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">))</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  methods</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    onScroll</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 计算向下滑动了多少距离</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> scrollTop</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">$refs</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">list</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">scrollTop</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      //此时的开始索引 比如向下滑动了200 每一项高度为50 就是滑动了4个元素</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">sta</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> Math</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">floor</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">scrollTop</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> /</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">itemHeight</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      //此时的结束索引   滑动了多少个元素 + 当前页面总共显示多少个元素 </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">sta</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">visibleItem</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 由于渲染区域向上滚动了,此时需要向下偏移回来</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      //此时的偏移量 100-(100%60) = 60 滚动了几个元素,偏移量就是多少</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">      this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">offset</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> scrollTop</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">scrollTop</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> %</span><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">itemHeight</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> scoped</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">*</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  margin</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  padding</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#F5A97F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/* 最大盒子 */</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;">.</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">list-container</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#F5A97F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  overflow</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> auto</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  position</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> relative</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#91D7E3;--shiki-dark:#56B6C2;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  -webkit-overflow-scrolling</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> touch</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/* 用于撑起父盒子 */</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;">.</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">list-phantom</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  position</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> absolute</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  left</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  top</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  right</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  z-index</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> -1</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D19A66;">.</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">list</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  left</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  right</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  top</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  position</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> absolute</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#ABB2BF;">  text-align</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D19A66;"> center</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">style</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="h5真机调试插件" tabindex="-1"><a class="header-anchor" href="#h5真机调试插件"><span>H5真机调试插件</span></a></h2><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //index.html模板中使用  可配合插件 指定环境中使用</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &lt;%</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">DEV</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> %&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;https://cdnjs.cloudflare.com/ajax/libs/eruda/2.4.1/eruda.min.js&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">     &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">eruda.init()</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">    &lt;%</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> %&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="h5配置响应式" tabindex="-1"><a class="header-anchor" href="#h5配置响应式"><span>H5配置响应式</span></a></h2><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 下载适配文件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> amfe</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> flexible</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// main.js中引入</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;amfe-flexible&#39;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 使用postcss插件自动将px转为rem</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> D</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> postcss</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> pxtorem</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 项目根目录中创建 .postcssrc.js 文件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">module</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">exports</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // 配置要使用的 PostCSS 插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  plugins</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 配置使用 autoprefixer 插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 作用：生成浏览器 CSS 样式规则前缀</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // VueCLI 内部已经配置了 autoprefixer 插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 所以又配置了一次，所以产生冲突了</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // &#39;autoprefixer&#39;: { // autoprefixer 插件的配置</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //   // 配置要兼容到的环境信息</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //   browsers: [&#39;Android &gt;= 4.0&#39;, &#39;iOS &gt;= 8&#39;]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // },</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 配置使用 postcss-pxtorem 插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 作用：把 px 转为 rem</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">    &#39;postcss-pxtorem&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 如果使用了vant组件  并且设计稿不是375的配置  是375设计稿直接配置为37.5</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">      rootValue</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">({</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> })</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">indexOf</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;vant&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">!==</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 37.5</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 75</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      propList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;*&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="h5图片裁切" tabindex="-1"><a class="header-anchor" href="#h5图片裁切"><span>H5图片裁切</span></a></h2><div class="language-vue line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-vue;"><code><span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">img</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> :</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">base64</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> name</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;"> accept</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;image/*&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;">change</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">uploadImg</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;"> /&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> Clipic</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;clipic&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> clipic</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> Clipic</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  data</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      base64</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  methods</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">    uploadImg</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">event</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> files</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> event</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">files</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;event    ===&gt; &#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> event</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> reader</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> FileReader</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      reader</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">readAsDataURL</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;">files</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">])</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      reader</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">onload</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> img</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        clipic</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">getImage</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          width</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 500</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          height</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> 400</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> img</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">          onDone</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> base64</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">base64</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;"> base64</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      event</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打包优化" tabindex="-1"><a class="header-anchor" href="#打包优化"><span>打包优化</span></a></h2><h3 id="去除项目所有console-log" tabindex="-1"><a class="header-anchor" href="#去除项目所有console-log"><span>去除项目所有console.log</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 去除所有console插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> D</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> uglifyjs</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> webpack</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> plugin</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> UglifyJsPlugin</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;uglifyjs-webpack-plugin&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">configureWebpack</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  plugins</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">env</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#F5A97F;--shiki-dark:#E5C07B;">NODE_ENV</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">startsWith</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;pro&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    // 配置删除所有log插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">    new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> UglifyJsPlugin</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">      uglifyOptions</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 删除注释</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        output</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          comments</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        compress</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          drop_console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> //是否删除调式带有console的</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          drop_debugger</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          pure_funcs</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;console.log&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 只删除所有console.log</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">  ] </span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启gzip压缩" tabindex="-1"><a class="header-anchor" href="#开启gzip压缩"><span>开启Gzip压缩</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//预览打包体积插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">D</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> webpack</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">bundle</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">analyzer</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  或直接在</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> build命令里添加</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> --</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">report</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//开启Gzip压缩插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">D</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> compression</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">webpack</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">plugin</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//vue.config.js 文件中使用插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> BundleAnalyzerPlugin</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;webpack-bundle-analyzer&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">BundleAnalyzerPlugin</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> CompressionPlugin</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;compression-webpack-plugin&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">configureWebpack</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    plugins</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 预览打包体积页面</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">      new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> BundleAnalyzerPlugin</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">       // 开启gzip压缩</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">      new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> CompressionPlugin</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//而后运行 yarn build 命令, 打包好的dist 文件里就会多了.gz后缀文件</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启cdn优化" tabindex="-1"><a class="header-anchor" href="#开启cdn优化"><span>开启CDN优化</span></a></h3><ul><li>需注意包的依赖关系,前后顺序</li></ul><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//下载插件</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">yarn</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> add</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">D</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> html</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">webpack</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">externals</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">plugin</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//vue.config.js文件中使用</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> Externals</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> require</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;html-webpack-externals-plugin&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">configureWebpack</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //需配置生产环境才运行此打包配置  process.env.NODE_ENV === &#39;production&#39;?[配置]:[]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    plugins</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;">        new</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> Externals</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">          //配置CDN,排除打包</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          externals</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            module</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;vue&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            entry</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;https://unpkg.com/vue@2.6.10/dist/vue.min.js&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//cdn链接</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            global</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;Vue&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//包的全局变量</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            module</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;element-ui&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            entry</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">              &#39;https://unpkg.com/element-ui@2.13.2/lib/index.js&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">              &#39;https://unpkg.com/element-ui@2.13.2/lib/theme-chalk/index.css&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">            ]</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//cdn链接</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">            global</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;ELEMENT&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//包的全局变量</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">          },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">        ]</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="不使用插件" tabindex="-1"><a class="header-anchor" href="#不使用插件"><span>不使用插件</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// vue.config.js中</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> cdn</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> css</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> js</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [] </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 通过环境变量 来区分是否使用cdn</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> isProd</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">env</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#F5A97F;--shiki-dark:#E06C75;">NODE_ENV</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;production&#39;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 判断是否是生产环境</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> externals</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {}</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">isProd</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // 如果是生产环境 就排除打包 否则不排除</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  externals</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">    &#39;vue&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;Vue&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">    &#39;element-ui&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;ELEMENT&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">    &#39;echarts&#39;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;echarts&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  cdn</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    css</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      // 在main.js中的css,打包时可以先注释掉</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">      &#39;https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/theme-chalk/index.min.css&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">    ]</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    js</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">      &#39;https://cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.min.js&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">      &#39;https://cdn.bootcdn.net/ajax/libs/echarts/5.4.2/echarts.min.js&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">      &#39;https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/index.min.js&#39;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">    ]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// configureWebpack配置项中 </span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">configureWebpack</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // 配置排除打包</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  externals</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// chainWebpack配置项,与configureWebpack同级别</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">chainWebpack</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">config</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // 配置注入到模板</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">  config</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">plugin</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;html&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">tap</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    args</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#F5A97F;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">cdn</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> cdn</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> args</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 最后模板中配置引入css和js即可</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">  &lt;!-- 引入样式 --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">  &lt;% for(var css of htmlWebpackPlugin.options.cdn.css) </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> %&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">link</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> rel</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;stylesheet&quot;</span><span style="--shiki-light:#EED49F;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> href</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;&lt;%=css%&gt;&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">  &lt;% } %&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">&gt;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">&lt;!--</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> 引入JS</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> --&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">  &lt;%</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> for</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">var</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> js</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> of</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> htmlWebpackPlugin</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">options</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">cdn</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">js</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> %&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">  &lt;script </span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">src</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&quot;&lt;%=js%&gt;&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">&gt;&lt;/</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">&gt;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">&lt;% </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> %&gt;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="axios取消请求" tabindex="-1"><a class="header-anchor" href="#axios取消请求"><span>axios取消请求</span></a></h2><ul><li>路由切换可取消上一次页面padding状态的请求，可添加白名单</li><li>demo地址 <a href="https://gitee.com/deng-jintao/axios-cancol" target="_blank" rel="noopener noreferrer">gitee</a></li></ul><h3 id="utils-request-js" tabindex="-1"><a class="header-anchor" href="#utils-request-js"><span>utils/request.js</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">utils</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">axios</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">js</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  封装请求拦截</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">  简单封装下</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> axios</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;axios&#39;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 引入axios</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">window</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">axiosCancel</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []  </span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 全局定义一个存放取消请求的标识</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 请求拦截器</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">axios</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">interceptors</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">use</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">config</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> whiteList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;">&#39;/api2&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 取消接口的白名单</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    //在请求拦截器中加入取消请求标识  白名单除外</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">config</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> whiteList</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">every</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">item</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">config</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">url</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">includes</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">))) </span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">      config</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">cancelToken</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> axios</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">CancelToken</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">cancel</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">        window</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">axiosCancel</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">push</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">{</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">          cancel</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">        },</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">    }</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> config</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  },</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">error</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">log</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">error</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A6DA95;--shiki-dark:#98C379;"> &#39;请求前&#39;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> Promise</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">reject</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">error</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">/**</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * get方法，对应get请求</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">param</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> {</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">String</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> url</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> [请求的url地址]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#939AB7;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">param</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> {</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">Object</span><span style="--shiki-light:#939AB7;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> params</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> [请求时携带的参数]</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> */</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> get</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">url</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> params</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;--shiki-light-font-weight:bold;--shiki-dark-font-weight:inherit;"> new</span><span style="--shiki-light:#EED49F;--shiki-dark:#E5C07B;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> Promise</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">resolve</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> reject</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">    axios</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      .</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">get</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">        params</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;"> params</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      .</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">then</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">        resolve</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">res</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">      .</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">catch</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">        reject</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">err</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">      }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="router-js" tabindex="-1"><a class="header-anchor" href="#router-js"><span>router.js</span></a></h3><div class="language-javascript line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="shiki shiki-themes catppuccin-macchiato one-dark-pro vp-code" style="--shiki-light:#cad3f5;--shiki-dark:#abb2bf;--shiki-light-bg:#24273a;--shiki-dark-bg:#282c34 language-javascript;"><code><span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 添加路由守卫</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 路由跳转取消上一个页面请求</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 创建一个全局变量，用于存储所有未完成的 Axios 请求的 cancel 函数</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">window</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">axiosCancel</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;"> []</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 在 Vue Router 的 beforeEach 导航守卫中取消所有未完成的 Axios 请求</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">router</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">beforeEach</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">to</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> next</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  // 遍历所有未完成的请求，并调用 cancel 方法</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">  window</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;">axiosCancel</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">forEach</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">({</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> cancel</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> },</span><span style="--shiki-light:#EE99A0;--shiki-dark:#E06C75;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> index</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;"> {</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">      cancel</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 取消请求</span></span></span>
<span class="line"><span class="line highlighted"><span style="--shiki-light:#8BD5CA;--shiki-dark:#C678DD;">      delete</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E5C07B;"> window</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">axiosCancel</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#E06C75;">index</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 删除已取消的请求项</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">  }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#61AFEF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">  next</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#6E738D;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> // 继续导航</span></span></span>
<span class="line"><span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#ABB2BF;">;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,43);function d(r,B){const a=i("Effect"),n=i("CommentService");return e(),h("div",null,[p,s(a),s(n)])}const c=l(t,[["render",d],["__file","index.html.vue"]]),g=JSON.parse('{"path":"/Utils/","title":"常用工具指令","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"自定义指令","slug":"自定义指令","link":"#自定义指令","children":[{"level":3,"title":"一次性导入所有指令","slug":"一次性导入所有指令","link":"#一次性导入所有指令","children":[]},{"level":3,"title":"节流指令","slug":"节流指令","link":"#节流指令","children":[]},{"level":3,"title":"防抖指令","slug":"防抖指令","link":"#防抖指令","children":[]},{"level":3,"title":"图片懒加载指令","slug":"图片懒加载指令","link":"#图片懒加载指令","children":[]}]},{"level":2,"title":"上传图片到七牛","slug":"上传图片到七牛","link":"#上传图片到七牛","children":[]},{"level":2,"title":"修改el-upload组件框大小","slug":"修改el-upload组件框大小","link":"#修改el-upload组件框大小","children":[]},{"level":2,"title":"过滤时间","slug":"过滤时间","link":"#过滤时间","children":[]},{"level":2,"title":"前端长列表优化","slug":"前端长列表优化","link":"#前端长列表优化","children":[{"level":3,"title":"前端分页","slug":"前端分页","link":"#前端分页","children":[]},{"level":3,"title":"虚拟列表","slug":"虚拟列表","link":"#虚拟列表","children":[]}]},{"level":2,"title":"H5真机调试插件","slug":"h5真机调试插件","link":"#h5真机调试插件","children":[]},{"level":2,"title":"H5配置响应式","slug":"h5配置响应式","link":"#h5配置响应式","children":[]},{"level":2,"title":"H5图片裁切","slug":"h5图片裁切","link":"#h5图片裁切","children":[]},{"level":2,"title":"打包优化","slug":"打包优化","link":"#打包优化","children":[{"level":3,"title":"去除项目所有console.log","slug":"去除项目所有console-log","link":"#去除项目所有console-log","children":[]},{"level":3,"title":"开启Gzip压缩","slug":"开启gzip压缩","link":"#开启gzip压缩","children":[]},{"level":3,"title":"开启CDN优化","slug":"开启cdn优化","link":"#开启cdn优化","children":[]},{"level":3,"title":"不使用插件","slug":"不使用插件","link":"#不使用插件","children":[]}]},{"level":2,"title":"axios取消请求","slug":"axios取消请求","link":"#axios取消请求","children":[{"level":3,"title":"utils/request.js","slug":"utils-request-js","link":"#utils-request-js","children":[]},{"level":3,"title":"router.js","slug":"router-js","link":"#router-js","children":[]}]}],"git":{"updatedTime":1721985816000,"contributors":[{"name":"v_jntaodeng","email":"v_jntaodeng@tencent.com","commits":2}]},"filePathRelative":"Utils/README.md"}');export{c as comp,g as data};
